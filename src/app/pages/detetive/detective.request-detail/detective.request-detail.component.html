<section class="p-4">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <h1 class="text-center">INFORMAÇÕES</h1>
        <h4>DO SERVIÇO</h4>
      </div>
    </div>
  </div>

  <div *ngIf="!dados && dados?.detective" class="d-flex p-3 justify-content-between mt-3 align-items-center"
    style="background-color: white; border-radius: 25px">
    <!-- Rounded profile image -->
    <img src="https://via.placeholder.com/100" alt="" class="rounded-circle w-100 me-3">
    <div class="d-flex flex-column text-start">
      <h4 class="fw-bold">{{dados["expand"].detective.name}}</h4>
      <span class="fw-bold">Serviço: {{dados["expand"].speciality.label}}</span>
      <div class="mt-3">
        <div class="d-flex justify-content-center">
          <!-- phone circle button -->
          <div class="text-center me-3">
            <button
              class="btn btn-circle-primary d-flex justify-content-center align-items-center border rounded-circle">
              <i class="material-icons">phone</i>
            </button>
            <span class="d-block">Telefone</span>
          </div>
          <!-- whatsapp circle button -->
          <div class="text-center me-3">
            <button
              class="btn btn-circle-primary d-flex justify-content-center align-items-center border rounded-circle m-0">
              <i class="material-icons">chat</i>
            </button>
            <span class="d-block">Whatsapp</span>
          </div>
          <!-- info circle button -->
          <div class="text-center me-3">
            <button
              class="btn btn-circle-primary d-flex justify-content-center align-items-center border rounded-circle">
              <i class="material-icons">info</i>
            </button>
            <span class="d-block">Info</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="text-center my-4">
    <ul class="progress-">
      <li class="progress__item" *ngFor="let item of items"
        [class.progress__item--active]="item && item?.status === dados?.status">
        <p class="progress__title">{{item.label}}</p>
        <!-- <p class="progress__info">Completed</p> -->
      </li>
    </ul>
  </div>

  <!-- botão iniciar investigação -->
  <div class="d-flex justify-content-center gap-3">
    <button class="p-button-rounded access-button w-100 my-5 fw-bold" (click)="visible = true">Ver detalhes do serviço</button>

    <button class="p-button-rounded access-button w-100 my-5 fw-bold" *ngIf="dados?.status === 2" (click)="iniciarInvestigacao()">Iniciar
      Investigação</button>

      <button class="p-button-rounded access-button w-100 my-5 fw-bold" *ngIf="dados?.status === 3" (click)="retornoDiag = true;">Iniciar
        retorno da solicitação</button>
  </div>

</section>

<!-- p-dialog form-->
<p-dialog header="Retorno" [(visible)]="retornoDiag">
  <div class="p-fluid">
    <div class="p-field">
      <label for="name" class="mb-3">Relato</label>
      <textarea type="text" id="name" pInputTextarea [(ngModel)]="relato"></textarea>
    </div>
    <div class="form-group">
      <label for="file" class="my-3">Anexos</label>
      <input type="file" multiple="true" id="file" (change)="anexar($event)">
    </div>
  </div>
  <button class="p-button-rounded access-button w-100 my-5 fw-bold" (click)="iniciarRetorno()">Iniciar
    retorno da solicitação</button>
</p-dialog>

<p-dialog header="Detalhes" [style]="{'max-width': '100vw'}" [(visible)]="visible" [responsive]="true">
  <h3>Axenos</h3>
  <p-carousel [value]="dados?.anexos">
    <ng-template let-image pTemplate="item">
      <img style="max-width: 270px;max-height: 400px;" [src]="'https://oracle.garrysmod.com.br/http://168.138.155.212:2021/api/files/requests/'+dados.id+'/'+image | secure | async" [alt]="'imagem'">
    </ng-template>
  </p-carousel>
  <p>Descrição da solicitação: </p>
  <p>{{dados?.relato}}</p>
</p-dialog>
